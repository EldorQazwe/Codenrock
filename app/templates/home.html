<!DOCTYPE html>
<html>

<head>
  <title>Домашняя страница</title>
  <link rel="stylesheet" href="{{url_for('static',filename='dist/css/main.css')}}">
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      darkMode: ['class', 'dark'],
      theme: {
        extend: {
          colors: {
            darkBlue: {
              100: "#ced1d4",
              200: "#9da2aa",
              300: "#6b747f",
              400: "#3a4555",
              500: "#09172a",
              600: "#071222",
              700: "#050e19",
              800: "#040911",
              900: "#020508",
            },
            blue: {
              100: "#e7ecfc",
              200: "#cfdaf9",
              300: "#b7c7f7",
              400: "#9fb5f4",
              500: "#87a2f1",
              600: "#6c82c1",
              700: "#516191",
              800: "#364160",
              900: "#1b2030",
            },
            lightBlue: {
              100: "#fafcff",
              200: "#f6f9ff",
              300: "#f1f5ff",
              400: "#edf2ff",
              500: "#e8efff",
              600: "#babfcc",
              700: "#8b8f99",
              800: "#5d6066",
              900: "#2e3033",
            },
            red: {
              100: "#f8d5d5",
              200: "#f1aaab",
              300: "#eb8081",
              400: "#e45557",
              500: "#dd2b2d",
              600: "#b12224",
              700: "#851a1b",
              800: "#581112",
              900: "#2c0909",
            },
            redHover: {
              100: "#ffd9e0",
              200: "#ffb4c1",
              300: "#ff8ea3",
              400: "#ff6984",
              500: "#ff4365",
              600: "#cc3651",
              700: "#99283d",
              800: "#661b28",
              900: "#330d14",
            },
          },
        },
      },
    }
  </script>
</head>

<body>
  <main class="min-w-full flex flex-col lg:flex-row min-h-screen gap-0 lg:gap-28">

    <nav class="home-sidebar">
      <!-- Nothing... ...at least for now... -->
    </nav>

    <div class="home-body">
      <div class="home-profile">
        <div class="profile-content-holder">
          <div class="profile-content">
            <span class="profile-picture">
              <span class="profile-picture-text">{{user.first_name[:1]}}</span>
            </span>
            <div class="profile-text-holder">

              <p class="profile-text" id="name">{{user.first_name}} {{user.last_name}}</p>
              <p class="profile-text" id="company">{{company.company}}</p>
              <p class="profile-text" id="department">
                <span class="department-icon">
                  <svg width="15" height="15" viewBox="0 0 15 15" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path
                      d="M3.125 5C3.62228 5 4.09919 4.80246 4.45083 4.45083C4.80246 4.09919 5 3.62228 5 3.125C5 2.62772 4.80246 2.15081 4.45083 1.79917C4.09919 1.44754 3.62228 1.25 3.125 1.25C2.62772 1.25 2.15081 1.44754 1.79917 1.79917C1.44754 2.15081 1.25 2.62772 1.25 3.125C1.25 3.62228 1.44754 4.09919 1.79917 4.45083C2.15081 4.80246 2.62772 5 3.125 5Z"
                      stroke="#090F1F" stroke-width="1.33333" stroke-linecap="round" stroke-linejoin="round" />
                    <path
                      d="M1.96319 4.59688C1.68974 5.11727 1.49161 5.67387 1.37476 6.25M4.59663 1.96344C5.11702 1.68999 5.67363 1.49186 6.24976 1.375M11.8748 5C12.372 5 12.849 4.80246 13.2006 4.45083C13.5522 4.09919 13.7498 3.62228 13.7498 3.125C13.7498 2.62772 13.5522 2.15081 13.2006 1.79917C12.849 1.44754 12.372 1.25 11.8748 1.25C11.3775 1.25 10.9006 1.44754 10.5489 1.79917C10.1973 2.15081 9.99976 2.62772 9.99976 3.125C9.99976 3.62228 10.1973 4.09919 10.5489 4.45083C10.9006 4.80246 11.3775 5 11.8748 5Z"
                      stroke="#090F1F" stroke-width="1.33333" stroke-linecap="round" stroke-linejoin="round" />
                    <path
                      d="M10.4029 1.96344C9.88249 1.68999 9.32589 1.49186 8.74976 1.375M13.036 4.59687C13.3096 5.11724 13.5078 5.67385 13.6248 6.25M11.8748 13.75C12.372 13.75 12.849 13.5525 13.2006 13.2008C13.5522 12.8492 13.7498 12.3723 13.7498 11.875C13.7498 11.3777 13.5522 10.9008 13.2006 10.5492C12.849 10.1975 12.372 10 11.8748 10C11.3775 10 10.9006 10.1975 10.5489 10.5492C10.1973 10.9008 9.99976 11.3777 9.99976 11.875C9.99976 12.3723 10.1973 12.8492 10.5489 13.2008C10.9006 13.5525 11.3775 13.75 11.8748 13.75Z"
                      stroke="#090F1F" stroke-width="1.33333" stroke-linecap="round" stroke-linejoin="round" />
                    <path
                      d="M13.036 10.4031C13.3096 9.88275 13.5078 9.32615 13.6248 8.75M10.4029 13.0362C9.88251 13.3098 9.3259 13.508 8.74976 13.625M3.12476 13.75C3.62204 13.75 4.09895 13.5525 4.45058 13.2008C4.80221 12.8492 4.99976 12.3723 4.99976 11.875C4.99976 11.3777 4.80221 10.9008 4.45058 10.5492C4.09895 10.1975 3.62204 10 3.12476 10C2.62747 10 2.15056 10.1975 1.79893 10.5492C1.4473 10.9008 1.24976 11.3777 1.24976 11.875C1.24976 12.3723 1.4473 12.8492 1.79893 13.2008C2.15056 13.5525 2.62747 13.75 3.12476 13.75Z"
                      stroke="#090F1F" stroke-width="1.33333" stroke-linecap="round" stroke-linejoin="round" />
                    <path
                      d="M4.59663 13.0362C5.117 13.3098 5.67361 13.508 6.24976 13.625M1.96319 10.4031C1.68974 9.88273 1.49162 9.32613 1.37476 8.75M7.49976 9.375V5.625M5.62476 7.5H9.37476"
                      stroke="#090F1F" stroke-width="1.33333" stroke-linecap="round" stroke-linejoin="round" />
                  </svg>
                </span>{{department.name}}
              </p>
            </div>

          </div>
          <div class="activity-filter-holder">
            <p class="profile-text" id="header">Виды активностей</p>
            <div class="cards">
              {% for activity_type in activity_types %}
              <div class="card">
                <button type="button">
                  <img src="/static/src/img/activity_{{activity_type.id}}.svg" />
                  <p>{{activity_type.name}}</p>
                  <input type="hidden" name="id" value="{{activity_type.id}}" />
                </button>
              </div>
              {% endfor %}
            </div>
          </div>
        </div>
      </div>

      <div class="home-statistics">
        <div class="head-row">
          <p id="hello">Приветствую, {{user.first_name}}</p>
          <p id="date">30 Сен, 2023</p>
        </div>

        <div class="points-row">
          <div class="card">
            <svg width="76" height="76" viewBox="0 0 76 76" fill="none" xmlns="http://www.w3.org/2000/svg">
              <rect width="76" height="76" rx="14" fill="#87A2F1" />
              <path
                d="M36.6589 12.5567C31.6478 12.9179 26.7947 14.829 22.852 17.9666C22.0093 18.6438 19.9778 20.6076 19.3082 21.4051C13.7253 28.0339 11.9721 36.9876 14.6282 45.3094C15.5536 48.2212 17.3293 51.3964 19.3458 53.7514C20.0756 54.6017 22.0093 56.4752 22.852 57.1524C26.4712 60.0341 30.6019 61.7797 35.3798 62.4418C36.704 62.6224 40.2253 62.6224 41.5496 62.4418C46.3199 61.7797 50.4281 60.0492 54.0773 57.1524C55.1457 56.3021 57.3653 54.0675 58.1478 53.0592C61.0522 49.3047 62.6849 45.3996 63.347 40.6444C63.5276 39.3126 63.5276 35.8064 63.347 34.4746C62.6849 29.7344 61.0221 25.7541 58.1554 22.0673C57.3653 21.0515 55.1532 18.8243 54.0773 17.9666C49.5553 14.3701 44.0325 12.4589 38.2916 12.5191C37.5768 12.5266 36.847 12.5417 36.6589 12.5567ZM40.8348 16.7552C43.3328 17.0486 45.5223 17.7033 47.7946 18.8319C53.069 21.4578 56.9891 26.183 58.6219 31.8712C59.4796 34.8734 59.6226 38.4473 59.0131 41.6075C58.0876 46.3703 55.3865 50.8095 51.5191 53.9245C50.0218 55.1284 47.5463 56.5354 45.748 57.19C43.3478 58.0703 41.0605 58.4766 38.4647 58.4766C35.0863 58.4766 32.1895 57.7994 29.1723 56.3021C25.0416 54.248 21.761 50.9675 19.7295 46.8518C18.2097 43.7895 17.5475 40.9529 17.5475 37.5595C17.5475 34.1811 18.2172 31.3144 19.7295 28.2672C22.8596 21.9318 28.9842 17.613 36.0344 16.7552C37.1856 16.6198 39.646 16.6198 40.8348 16.7552Z"
                fill="#E8EFFF" />
              <path
                d="M29.6314 27.8232C29.526 27.9285 29.511 29.0045 29.511 38.53C29.511 46.6636 29.5336 49.1391 29.6013 49.2068C29.7292 49.3347 33.4311 49.3347 33.559 49.2068C33.6267 49.1391 33.6493 48.5146 33.6493 46.8668V44.6246L34.8757 43.2928C35.5454 42.563 36.2677 41.7805 36.4783 41.5547L36.8546 41.1484L38.397 42.9467C39.2472 43.9399 40.5113 45.4222 41.211 46.2498C41.9108 47.0775 42.5052 47.7697 42.5278 47.7923C42.5503 47.8148 42.7535 48.0481 42.9792 48.319C43.2049 48.5898 43.4909 48.9134 43.6112 49.0488L43.8294 49.2971H46.2597C47.5915 49.2971 48.7352 49.2745 48.8029 49.2519C48.8706 49.2294 48.9233 49.1617 48.9233 49.1165C48.9233 49.0337 46.5682 46.2047 44.8151 44.1807C44.627 43.9625 41.8656 40.7271 40.5489 39.1771C40.0674 38.5978 39.6761 38.1087 39.6836 38.0786C39.6987 38.041 41.053 36.5512 41.8882 35.6483C42.0312 35.4903 46.7262 30.3663 47.7871 29.2076C48.3665 28.5681 48.848 28.0113 48.848 27.9661C48.848 27.7178 48.6675 27.7028 46.4102 27.7103C45.1612 27.7103 44.0853 27.7329 44.0175 27.763C43.9498 27.7931 43.6263 28.1016 43.3028 28.4552C42.9792 28.8088 41.8882 30.0127 40.8725 31.1263C39.8567 32.2398 38.9764 33.2029 38.9162 33.2707C38.856 33.3384 38.4647 33.7597 38.0509 34.2112C37.6371 34.6701 36.8771 35.4978 36.358 36.0546C35.8388 36.6189 35.0262 37.5067 34.5522 38.0259L33.6869 38.9815L33.6643 33.4362C33.6493 28.3273 33.6417 27.8834 33.5214 27.7931C33.4311 27.7254 32.9119 27.7028 31.5726 27.7028C30.0151 27.7028 29.7292 27.7178 29.6314 27.8232Z"
                fill="#E8EFFF" />
            </svg>
            <div class="text-holder">
              <p class="header">Текущие баллы</p>
              <p class="count">{{user.balance}}</p>
            </div>
          </div>
          <div class="card">
            <svg width="76" height="76" viewBox="0 0 76 76" fill="none" xmlns="http://www.w3.org/2000/svg">
              <rect width="76" height="76" rx="14" fill="#87A2F1" />
              <path
                d="M36.6589 12.5567C31.6478 12.9179 26.7947 14.829 22.852 17.9666C22.0093 18.6438 19.9778 20.6076 19.3082 21.4051C13.7253 28.0339 11.9721 36.9876 14.6282 45.3094C15.5536 48.2212 17.3293 51.3964 19.3458 53.7514C20.0756 54.6017 22.0093 56.4752 22.852 57.1524C26.4712 60.0341 30.6019 61.7797 35.3798 62.4418C36.704 62.6224 40.2253 62.6224 41.5496 62.4418C46.3199 61.7797 50.4281 60.0492 54.0773 57.1524C55.1457 56.3021 57.3653 54.0675 58.1478 53.0592C61.0522 49.3047 62.6849 45.3996 63.347 40.6444C63.5276 39.3126 63.5276 35.8064 63.347 34.4746C62.6849 29.7344 61.0221 25.7541 58.1554 22.0673C57.3653 21.0515 55.1532 18.8243 54.0773 17.9666C49.5553 14.3701 44.0325 12.4589 38.2916 12.5191C37.5768 12.5266 36.847 12.5417 36.6589 12.5567ZM40.8348 16.7552C43.3328 17.0486 45.5223 17.7033 47.7946 18.8319C53.069 21.4578 56.9891 26.183 58.6219 31.8712C59.4796 34.8734 59.6226 38.4473 59.0131 41.6075C58.0876 46.3703 55.3865 50.8095 51.5191 53.9245C50.0218 55.1284 47.5463 56.5354 45.748 57.19C43.3478 58.0703 41.0605 58.4766 38.4647 58.4766C35.0863 58.4766 32.1895 57.7994 29.1723 56.3021C25.0416 54.248 21.761 50.9675 19.7295 46.8518C18.2097 43.7895 17.5475 40.9529 17.5475 37.5595C17.5475 34.1811 18.2172 31.3144 19.7295 28.2672C22.8596 21.9318 28.9842 17.613 36.0344 16.7552C37.1856 16.6198 39.646 16.6198 40.8348 16.7552Z"
                fill="#E8EFFF" />
              <path
                d="M29.6314 27.8232C29.526 27.9285 29.511 29.0045 29.511 38.53C29.511 46.6636 29.5336 49.1391 29.6013 49.2068C29.7292 49.3347 33.4311 49.3347 33.559 49.2068C33.6267 49.1391 33.6493 48.5146 33.6493 46.8668V44.6246L34.8757 43.2928C35.5454 42.563 36.2677 41.7805 36.4783 41.5547L36.8546 41.1484L38.397 42.9467C39.2472 43.9399 40.5113 45.4222 41.211 46.2498C41.9108 47.0775 42.5052 47.7697 42.5278 47.7923C42.5503 47.8148 42.7535 48.0481 42.9792 48.319C43.2049 48.5898 43.4909 48.9134 43.6112 49.0488L43.8294 49.2971H46.2597C47.5915 49.2971 48.7352 49.2745 48.8029 49.2519C48.8706 49.2294 48.9233 49.1617 48.9233 49.1165C48.9233 49.0337 46.5682 46.2047 44.8151 44.1807C44.627 43.9625 41.8656 40.7271 40.5489 39.1771C40.0674 38.5978 39.6761 38.1087 39.6836 38.0786C39.6987 38.041 41.053 36.5512 41.8882 35.6483C42.0312 35.4903 46.7262 30.3663 47.7871 29.2076C48.3665 28.5681 48.848 28.0113 48.848 27.9661C48.848 27.7178 48.6675 27.7028 46.4102 27.7103C45.1612 27.7103 44.0853 27.7329 44.0175 27.763C43.9498 27.7931 43.6263 28.1016 43.3028 28.4552C42.9792 28.8088 41.8882 30.0127 40.8725 31.1263C39.8567 32.2398 38.9764 33.2029 38.9162 33.2707C38.856 33.3384 38.4647 33.7597 38.0509 34.2112C37.6371 34.6701 36.8771 35.4978 36.358 36.0546C35.8388 36.6189 35.0262 37.5067 34.5522 38.0259L33.6869 38.9815L33.6643 33.4362C33.6493 28.3273 33.6417 27.8834 33.5214 27.7931C33.4311 27.7254 32.9119 27.7028 31.5726 27.7028C30.0151 27.7028 29.7292 27.7178 29.6314 27.8232Z"
                fill="#E8EFFF" />
              <rect x="43" y="50" width="20" height="14" fill="#87A2F1" />
              <g clip-path="url(#clip0_67_8445)">
                <path d="M59.5986 63.7783L50.5986 54.7783" stroke="#E8EFFF" stroke-width="3" stroke-linecap="round"
                  stroke-linejoin="round" />
                <path d="M59.106 57.2538L59.4135 63.6104L53.057 63.9179" stroke="#E8EFFF" stroke-width="3"
                  stroke-linecap="round" stroke-linejoin="round" />
              </g>
              <defs>
                <clipPath id="clip0_67_8445">
                  <rect width="18" height="23" fill="white" transform="translate(67.1284 58.4585) rotate(132.23)" />
                </clipPath>
              </defs>
            </svg>
            <div class="text-holder">
              <p class="header">Всего пожертвовано</p>
              <p class="count">{{user.total_donations}}</p>
            </div>
          </div>
          <div class="card">
            <svg width="76" height="76" viewBox="0 0 76 76" fill="none" xmlns="http://www.w3.org/2000/svg">
              <rect width="76" height="76" rx="14" fill="#87A2F1" />
              <path
                d="M36.6586 12.5567C31.6475 12.9179 26.7945 14.829 22.8518 17.9666C22.0091 18.6438 19.9776 20.6076 19.3079 21.4051C13.725 28.0339 11.9719 36.9876 14.6279 45.3094C15.5534 48.2212 17.3291 51.3964 19.3456 53.7514C20.0754 54.6017 22.0091 56.4752 22.8518 57.1524C26.4709 60.0341 30.6017 61.7797 35.3795 62.4418C36.7038 62.6224 40.2251 62.6224 41.5493 62.4418C46.3196 61.7797 50.4278 60.0492 54.077 57.1524C55.1455 56.3021 57.3651 54.0675 58.1476 53.0592C61.0519 49.3047 62.6847 45.3996 63.3468 40.6444C63.5274 39.3126 63.5274 35.8064 63.3468 34.4746C62.6847 29.7344 61.0218 25.7541 58.1551 22.0673C57.3651 21.0515 55.153 18.8243 54.077 17.9666C49.555 14.3701 44.0323 12.4589 38.2914 12.5191C37.5766 12.5266 36.8467 12.5417 36.6586 12.5567ZM40.8345 16.7552C43.3325 17.0486 45.5221 17.7033 47.7944 18.8319C53.0688 21.4578 56.9889 26.183 58.6216 31.8712C59.4794 34.8734 59.6223 38.4473 59.0129 41.6075C58.0874 46.3703 55.3862 50.8095 51.5188 53.9245C50.0215 55.1284 47.5461 56.5354 45.7478 57.19C43.3476 58.0703 41.0602 58.4766 38.4644 58.4766C35.0861 58.4766 32.1893 57.7994 29.1721 56.3021C25.0413 54.248 21.7608 50.9675 19.7293 46.8518C18.2094 43.7895 17.5473 40.9529 17.5473 37.5595C17.5473 34.1811 18.2169 31.3144 19.7293 28.2672C22.8593 21.9318 28.984 17.613 36.0341 16.7552C37.1853 16.6198 39.6457 16.6198 40.8345 16.7552Z"
                fill="#E8EFFF" />
              <path
                d="M29.6311 27.8232C29.5258 27.9285 29.5107 29.0045 29.5107 38.53C29.5107 46.6636 29.5333 49.1391 29.601 49.2068C29.7289 49.3347 33.4308 49.3347 33.5587 49.2068C33.6265 49.1391 33.649 48.5146 33.649 46.8668V44.6246L34.8755 43.2928C35.5451 42.563 36.2674 41.7805 36.4781 41.5547L36.8543 41.1484L38.3968 42.9467C39.247 43.9399 40.511 45.4222 41.2108 46.2498C41.9105 47.0775 42.5049 47.7697 42.5275 47.7923C42.5501 47.8148 42.7532 48.0481 42.979 48.319C43.2047 48.5898 43.4906 48.9134 43.611 49.0488L43.8292 49.2971H46.2595C47.5913 49.2971 48.7349 49.2745 48.8027 49.2519C48.8704 49.2294 48.923 49.1617 48.923 49.1165C48.923 49.0337 46.568 46.2047 44.8149 44.1807C44.6268 43.9625 41.8654 40.7271 40.5487 39.1771C40.0671 38.5978 39.6759 38.1087 39.6834 38.0786C39.6984 38.041 41.0528 36.5512 41.888 35.6483C42.0309 35.4903 46.726 30.3663 47.7869 29.2076C48.3663 28.5681 48.8478 28.0113 48.8478 27.9661C48.8478 27.7178 48.6672 27.7028 46.41 27.7103C45.161 27.7103 44.085 27.7329 44.0173 27.763C43.9496 27.7931 43.626 28.1016 43.3025 28.4552C42.979 28.8088 41.888 30.0127 40.8722 31.1263C39.8564 32.2398 38.9761 33.2029 38.9159 33.2707C38.8557 33.3384 38.4645 33.7597 38.0507 34.2112C37.6368 34.6701 36.8769 35.4978 36.3577 36.0546C35.8386 36.6189 35.0259 37.5067 34.5519 38.0259L33.6866 38.9815L33.6641 33.4362C33.649 28.3273 33.6415 27.8834 33.5211 27.7931C33.4308 27.7254 32.9117 27.7028 31.5724 27.7028C30.0149 27.7028 29.7289 27.7178 29.6311 27.8232Z"
                fill="#E8EFFF" />
              <path d="M56.0054 10.0051H59.0054C62.8714 10.0051 66.0054 13.1391 66.0054 17.0051V20.0051"
                stroke="#E8EFFF" stroke-width="3" stroke-linecap="round" />
              <path d="M56 66H59C62.866 66 66 62.866 66 59V56" stroke="#E8EFFF" stroke-width="3"
                stroke-linecap="round" />
              <path d="M20 10H17C13.134 10 10 13.134 10 17V20" stroke="#E8EFFF" stroke-width="3"
                stroke-linecap="round" />
              <path d="M20 66H17C13.134 66 10 62.866 10 59V56" stroke="#E8EFFF" stroke-width="3"
                stroke-linecap="round" />
            </svg>

            <div class="text-holder">
              <p class="header">Текущие баллы</p>
              <p class="count">{{user.total_points}}</p>
            </div>
          </div>
        </div>

        <div class="rating-table-block">
          <div class="header">
            <p id="header" class="mr-auto">Рейтинг</p>

            <div date-rangepicker class="ml-auto">
              <div class="picker-holder">
                <div class="icon">
                  <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path
                      d="M3.5 0C3.63261 0 3.75979 0.0526784 3.85355 0.146447C3.94732 0.240215 4 0.367392 4 0.5V1H12V0.5C12 0.367392 12.0527 0.240215 12.1464 0.146447C12.2402 0.0526784 12.3674 0 12.5 0C12.6326 0 12.7598 0.0526784 12.8536 0.146447C12.9473 0.240215 13 0.367392 13 0.5V1H14C14.5304 1 15.0391 1.21071 15.4142 1.58579C15.7893 1.96086 16 2.46957 16 3V14C16 14.5304 15.7893 15.0391 15.4142 15.4142C15.0391 15.7893 14.5304 16 14 16H2C1.46957 16 0.960859 15.7893 0.585786 15.4142C0.210714 15.0391 0 14.5304 0 14V3C0 2.46957 0.210714 1.96086 0.585786 1.58579C0.960859 1.21071 1.46957 1 2 1H3V0.5C3 0.367392 3.05268 0.240215 3.14645 0.146447C3.24021 0.0526784 3.36739 0 3.5 0V0ZM2 2C1.73478 2 1.48043 2.10536 1.29289 2.29289C1.10536 2.48043 1 2.73478 1 3V4H15V3C15 2.73478 14.8946 2.48043 14.7071 2.29289C14.5196 2.10536 14.2652 2 14 2H2ZM15 5H1V14C1 14.2652 1.10536 14.5196 1.29289 14.7071C1.48043 14.8946 1.73478 15 2 15H14C14.2652 15 14.5196 14.8946 14.7071 14.7071C14.8946 14.5196 15 14.2652 15 14V5Z"
                      fill="#090F1F" />
                  </svg>
                </div>
                <input name="start" type="text" class="datepicker" placeholder="Дата начала" />
              </div>
              <span class="text-gray-500">—</span>
              <div class="picker-holder">
                <div class="icon">
                  <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path
                      d="M3.5 0C3.63261 0 3.75979 0.0526784 3.85355 0.146447C3.94732 0.240215 4 0.367392 4 0.5V1H12V0.5C12 0.367392 12.0527 0.240215 12.1464 0.146447C12.2402 0.0526784 12.3674 0 12.5 0C12.6326 0 12.7598 0.0526784 12.8536 0.146447C12.9473 0.240215 13 0.367392 13 0.5V1H14C14.5304 1 15.0391 1.21071 15.4142 1.58579C15.7893 1.96086 16 2.46957 16 3V14C16 14.5304 15.7893 15.0391 15.4142 15.4142C15.0391 15.7893 14.5304 16 14 16H2C1.46957 16 0.960859 15.7893 0.585786 15.4142C0.210714 15.0391 0 14.5304 0 14V3C0 2.46957 0.210714 1.96086 0.585786 1.58579C0.960859 1.21071 1.46957 1 2 1H3V0.5C3 0.367392 3.05268 0.240215 3.14645 0.146447C3.24021 0.0526784 3.36739 0 3.5 0V0ZM2 2C1.73478 2 1.48043 2.10536 1.29289 2.29289C1.10536 2.48043 1 2.73478 1 3V4H15V3C15 2.73478 14.8946 2.48043 14.7071 2.29289C14.5196 2.10536 14.2652 2 14 2H2ZM15 5H1V14C1 14.2652 1.10536 14.5196 1.29289 14.7071C1.48043 14.8946 1.73478 15 2 15H14C14.2652 15 14.5196 14.8946 14.7071 14.7071C14.8946 14.5196 15 14.2652 15 14V5Z"
                      fill="#090F1F" />
                  </svg>
                </div>
                <input name="end" type="text" class="datepicker" placeholder="Дата окончания" />
              </div>
            </div>
          </div>
          <div class="rating-table-holder">
            <div class="rating-table flex-col">
              <div class="-m-1.5 overflow-x-auto">
                <div class="p-1.5 min-w-full inline-block align-middle">
                  <div class="overflow-hidden">
                    <table class="min-w-full">
                      <tbody class="bg-lightBlue-500 rounded-xl">

                      </tbody>
                    </table>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </main>

  <script src="{{url_for('serve_preline_js')}}"></script>
  <script src="{{url_for('serve_twelements_js')}}"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/flowbite/1.8.1/datepicker.min.js"></script>

  <script>
    try {
      var date = new Date(Date.now())

      var months = ['Янв', 'Фев', 'Мар', 'Апр', 'Май', 'Июн', 'Июл', 'Авг', 'Сен', 'Окт', 'Ноя', 'Дек']

      var formattedDate = date.getDate() + ' ' + months[date.getMonth()] + ', ' + date.getFullYear()

      document.querySelector(".home-statistics .head-row #date").textContent = formattedDate

    } catch (error) {
      console.error(error)
    }

    function convertDateStringToSeconds(dateString) {
      try {
        var dateComponents = dateString.split('/');

        var dateObject = new Date(dateComponents[2], dateComponents[0] - 1, dateComponents[1]);

        var seconds = dateObject.getTime() / 1000;

        return seconds;

      } catch (error) {
        return error.toString();
      }
    }

    function updateFilters(chosenActivity, dateStart, dateEnd) {
      if (isNaN(dateStart) || isNaN(dateEnd)) return
      fetch(`/rating/filter?activity=${chosenActivity}&date_start=${dateStart}&date_end=${dateEnd}`)
        .then(res => res.json()).then(res => {
          var table = ""
          for (i in res) {
            var row = res[i]
            var tablerow = `<tr class="">
                              <td class="whitespace-nowrap text-base font-medium text-gray-800">
                                ${row.user.first_name} ${row.user.last_name}
                              </td>
                              <td class="whitespace-nowrap text-base font-medium text-right text-gray-800">
                                ${row.total_points}
                              </td>
                            </tr>`
            table += tablerow
          }
          document.querySelector("table tbody").innerHTML = table
        })
    }

    var activityButtons = document.querySelectorAll(".activity-filter-holder .cards .card button")

    var chosenActivity = 0

    for (var i in activityButtons.length) {
      var activityButton = activityButtons[i]
      console.log(activityButton)
      activityButton.addEventListener("click", (e) => {
        chosenActivity = e.target.querySelector('input[name="id"]').value

        updateFilters(chosenActivity, dateStart, dateEnd)
      })
    }

    var dateStartPicker = document.querySelector("input.datepicker[name='start']")
    var dateEndPicker = document.querySelector("input.datepicker[name='end']")

    var dateStart = ""
    var dateEnd = ""

    setInterval(() => {
      if (convertDateStringToSeconds(dateStartPicker.value) != dateStart || convertDateStringToSeconds(
          dateEndPicker.value) != dateEnd) {
        dateStart = convertDateStringToSeconds(dateStartPicker.value)
        dateEnd = convertDateStringToSeconds(dateEndPicker.value)

        updateFilters(chosenActivity, dateStart, dateEnd)
      }
    }, 100)
  </script>
</body>

</html>